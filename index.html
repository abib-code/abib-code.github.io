<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Catálogo de Rótulos</title>
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --text:#1d2433;
      --muted:#6b7280;
      --line:#e6e8ef;
      --accent:#2b6ff7;
      --accent2:#14b8a6;
      --shadow: 0 8px 24px rgba(17,24,39,.08);
      --radius:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:var(--bg);
      color:var(--text);
    }
    a{color:inherit}
    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:18px;
    }
    header{
      display:flex;
      gap:14px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
      padding:14px 16px;
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
    }
    .brand{
      display:flex;
      flex-direction:column;
      gap:2px;
      min-width:220px;
    }
    .brand h1{
      margin:0;
      font-size:16px;
      letter-spacing:.2px;
    }
    .brand p{
      margin:0;
      font-size:12px;
      color:var(--muted);
    }
    .search{
      flex:1;
      min-width:220px;
      display:flex;
      gap:10px;
      align-items:center;
    }
    .search input{
      width:100%;
      padding:12px 14px;
      border-radius:12px;
      border:1px solid var(--line);
      outline:none;
      background:#fff;
      font-size:14px;
    }
    .search input:focus{
      border-color: rgba(43,111,247,.35);
      box-shadow:0 0 0 4px rgba(43,111,247,.10);
    }
    .cartBtn{
      display:flex;
      gap:10px;
      align-items:center;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      background:#fff;
      cursor:pointer;
      user-select:none;
      white-space:nowrap;
    }
    .pill{
      background:rgba(43,111,247,.10);
      color:var(--accent);
      padding:2px 10px;
      border-radius:999px;
      font-weight:600;
      font-size:12px;
    }

    .layout{
      display:grid;
      grid-template-columns: 220px 1fr;
      gap:16px;
      margin-top:16px;
    }
    @media (max-width: 880px){
      .layout{grid-template-columns: 1fr}
    }

    .sidebar{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:14px;
      height:fit-content;
      position:sticky;
      top:16px;
    }
    @media (max-width: 880px){
      .sidebar{position:static}
    }
    .sidebar h2{
      margin:0 0 10px 0;
      font-size:13px;
      color:var(--muted);
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:.8px;
    }
    .cats{
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .cat{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      background:#fff;
      cursor:pointer;
    }
    .cat.active{
      border-color: rgba(43,111,247,.35);
      box-shadow:0 0 0 4px rgba(43,111,247,.10);
    }
    .cat span{
      color:var(--muted);
      font-size:12px;
    }

    .content{
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .hint{
      padding:12px 14px;
      border-radius:var(--radius);
      border:1px dashed rgba(107,114,128,.35);
      background:rgba(255,255,255,.65);
      color:var(--muted);
      font-size:13px;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap:14px;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns: repeat(2, minmax(0, 1fr))}
    }
    @media (max-width: 560px){
      .grid{grid-template-columns: 1fr}
    }

    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
      display:flex;
      flex-direction:column;
    }
    .thumb{
      background: linear-gradient(135deg, rgba(43,111,247,.12), rgba(20,184,166,.12));
      aspect-ratio: 4/3;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
    }
    .thumb img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .badge{
      position:absolute;
      top:10px;
      left:10px;
      background:#fff;
      border:1px solid var(--line);
      border-radius:999px;
      padding:4px 10px;
      font-size:12px;
      color:var(--muted);
    }
    .body{
      padding:12px 12px 14px 12px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .titleRow{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
    }
    .title{
      font-size:14px;
      font-weight:700;
      margin:0;
      line-height:1.2;
    }
    .meta{
      font-size:12px;
      color:var(--muted);
      margin:0;
      line-height:1.35;
    }
    .actions{
      display:flex;
      gap:8px;
      margin-top:6px;
    }
    .btn{
      flex:1;
      border:1px solid var(--line);
      background:#fff;
      padding:10px 10px;
      border-radius:12px;
      cursor:pointer;
      font-weight:700;
      font-size:13px;
    }
    .btn.primary{
      background:var(--accent);
      border-color: rgba(43,111,247,.35);
      color:#fff;
    }
    .btn.primary:hover{filter:brightness(.98)}
    .btn:hover{background:#fafbff}

    /* Modal carrinho */
    .modalBackdrop{
      position:fixed;
      inset:0;
      background:rgba(17,24,39,.45);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:50;
    }
    .modal{
      width:min(740px, 100%);
      background:#fff;
      border-radius:18px;
      border:1px solid var(--line);
      box-shadow:0 18px 60px rgba(17,24,39,.25);
      overflow:hidden;
    }
    .modalHead{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:14px 16px;
      border-bottom:1px solid var(--line);
    }
    .modalHead h3{margin:0;font-size:15px}
    .close{
      border:1px solid var(--line);
      background:#fff;
      border-radius:12px;
      padding:8px 10px;
      cursor:pointer;
      font-weight:700;
    }
    .modalBody{
      padding:12px 16px 16px 16px;
      display:flex;
      flex-direction:column;
      gap:10px;
      max-height:60vh;
      overflow:auto;
    }
    .row{
      display:grid;
      grid-template-columns: 1fr 120px 140px;
      gap:10px;
      align-items:center;
      border:1px solid var(--line);
      border-radius:14px;
      padding:10px 12px;
      background:#fff;
    }
    @media (max-width: 600px){
      .row{grid-template-columns: 1fr}
    }
    .row strong{font-size:13px}
    .qty{
      display:flex;
      align-items:center;
      gap:8px;
      justify-content:flex-end;
    }
    @media (max-width: 600px){
      .qty{justify-content:flex-start}
    }
    .qty button{
      width:34px;height:34px;
      border-radius:10px;
      border:1px solid var(--line);
      background:#fff;
      cursor:pointer;
      font-weight:900;
    }
    .qty input{
      width:54px;
      padding:8px 10px;
      border:1px solid var(--line);
      border-radius:10px;
      text-align:center;
      outline:none;
      font-weight:700;
    }
    .rowActions{
      display:flex;
      justify-content:flex-end;
      gap:8px;
    }
    @media (max-width: 600px){
      .rowActions{justify-content:flex-start}
    }
    .danger{
      border:1px solid rgba(239,68,68,.35);
      background:rgba(239,68,68,.08);
      color:#991b1b;
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
      font-weight:800;
    }
    .modalFoot{
      border-top:1px solid var(--line);
      padding:12px 16px 16px 16px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:space-between;
      align-items:center;
      background:#fff;
    }
    .note{
      color:var(--muted);
      font-size:12px;
      max-width:420px;
    }
    .wa{
      display:flex;
      gap:10px;
      align-items:center;
    }
    .wa input{
      width:210px;
      padding:10px 12px;
      border:1px solid var(--line);
      border-radius:12px;
      outline:none;
    }
    .wa .btn{
      min-width:200px;
      flex:0 0 auto;
    }
    .empty{
      padding:14px;
      border-radius:14px;
      background:rgba(107,114,128,.06);
      border:1px dashed rgba(107,114,128,.35);
      color:var(--muted);
      font-size:13px;
    }
  </style>
</head>
<body>
  <div class="wrap">

    <header>
      <div class="brand">
        <h1>Catálogo de Rótulos</h1>
        <p>Escolha seus modelos e finalize direto no WhatsApp</p>
      </div>

      <div class="search">
        <input id="search" type="search" placeholder="Pesquisar por nome, categoria ou info…" />
      </div>

      <div id="cartBtn" class="cartBtn" role="button" aria-label="Abrir carrinho">
        <strong>Carrinho</strong>
        <span id="cartCount" class="pill">0</span>
      </div>
    </header>

    <div class="layout">
      <aside class="sidebar">
        <h2>Categorias</h2>
        <div class="cats" id="cats"></div>
      </aside>

      <main class="content">
        <div class="hint">
          Dica: você pode enviar este arquivo pelo WhatsApp. A cliente escolhe os rótulos e clica em “Finalizar no WhatsApp” para te mandar o pedido.
        </div>

        <section class="grid" id="grid"></section>
      </main>
    </div>
  </div>

  <!-- Modal carrinho -->
  <div id="backdrop" class="modalBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modalHead">
        <h3>Seu carrinho</h3>
        <button class="close" id="closeModal">Fechar</button>
      </div>

      <div class="modalBody" id="cartBody"></div>

      <div class="modalFoot">
        <div class="note">
          O pedido será enviado como mensagem no WhatsApp com os modelos e quantidades selecionadas.
        </div>
        <div class="wa">
          <input id="clientName" placeholder="Nome da cliente (opcional)" />
          <button class="btn primary" id="checkout">Finalizar no WhatsApp</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // =========================
    // 1) CONFIGURAÇÕES
    // =========================
    const WHATSAPP_NUMBER = "5599999999999"; // <-- TROQUE AQUI (DDI + DDD + número, só números)

    const CATEGORIES = ["Todos", "Redondos", "Quadrados", "Especiais"];

    // Cadastre seus rótulos aqui (troque imagem, nome, categoria, info)
    const PRODUCTS = [
      {
        id: "R001",
        name: "Rótulo Minimal Redondo",
        category: "Redondos",
        info: "Tamanho: 5cm | Papel: couchê | Acabamento: fosco",
        image: "C:\Users\User\Documents\Banco de Dados\imgs\Rótulo Teste 1.png"
      },
      {
        id: "R002",
        name: "Rótulo Colorido Redondo",
        category: "Redondos",
        info: "Tamanho: 4cm | Vinil | Resistente à água",
        image: "https://via.placeholder.com/800x600.png?text=Imagem+do+R%C3%B3tulo"
      },
      {
        id: "Q001",
        name: "Rótulo Quadrado Clean",
        category: "Quadrados",
        info: "Tamanho: 5x5cm | Couchê | Brilho leve",
        image: "https://via.placeholder.com/800x600.png?text=Imagem+do+R%C3%B3tulo"
      },
      {
        id: "E001",
        name: "Rótulo Especial Recorte",
        category: "Especiais",
        info: "Formato personalizado | Ideal para kits | Premium",
        image: "https://via.placeholder.com/800x600.png?text=Imagem+do+R%C3%B3tulo"
      },
      {
        id: "Q002",
        name: "Rótulo Quadrado com Logo",
        category: "Quadrados",
        info: "Tamanho: 6x6cm | Vinil | Alta durabilidade",
        image: "https://via.placeholder.com/800x600.png?text=Imagem+do+R%C3%B3tulo"
      },
      {
        id: "E002",
        name: "Rótulo Especial Oval",
        category: "Especiais",
        info: "Tamanho: 6x4cm | Couchê | Sofisticado",
        image: "https://via.placeholder.com/800x600.png?text=Imagem+do+R%C3%B3tulo"
      }
    ];

    // =========================
    // 2) ESTADO
    // =========================
    const state = {
      activeCategory: "Todos",
      query: "",
      cart: {} // { productId: {id,name,qty} }
    };

    // =========================
    // 3) HELPERS
    // =========================
    const el = (id) => document.getElementById(id);

    function cartCount(){
      return Object.values(state.cart).reduce((acc, item) => acc + item.qty, 0);
    }

    function setCartCount(){
      el("cartCount").textContent = cartCount();
    }

    function matchesProduct(p){
      const q = state.query.trim().toLowerCase();
      const inCategory = state.activeCategory === "Todos" || p.category === state.activeCategory;
      if(!inCategory) return false;
      if(!q) return true;

      const hay = `${p.id} ${p.name} ${p.category} ${p.info}`.toLowerCase();
      return hay.includes(q);
    }

    // =========================
    // 4) RENDER CATEGORIAS
    // =========================
    function renderCategories(){
      const cats = el("cats");
      cats.innerHTML = "";

      CATEGORIES.forEach(cat => {
        const count = cat === "Todos"
          ? PRODUCTS.filter(p => p.name).length
          : PRODUCTS.filter(p => p.category === cat).length;

        const div = document.createElement("div");
        div.className = "cat" + (state.activeCategory === cat ? " active" : "");
        div.innerHTML = `<strong>${cat}</strong> <span>${count}</span>`;
        div.onclick = () => {
          state.activeCategory = cat;
          renderCategories();
          renderGrid();
        };
        cats.appendChild(div);
      });
    }

    // =========================
    // 5) RENDER GRID
    // =========================
    function renderGrid(){
      const grid = el("grid");
      const filtered = PRODUCTS.filter(matchesProduct);

      grid.innerHTML = "";
      if(filtered.length === 0){
        const empty = document.createElement("div");
        empty.className = "empty";
        empty.textContent = "Nenhum rótulo encontrado com esse filtro/pesquisa.";
        grid.appendChild(empty);
        return;
      }

      filtered.forEach(p => {
        const card = document.createElement("article");
        card.className = "card";

        const qtyInCart = state.cart[p.id]?.qty || 0;

        card.innerHTML = `
          <div class="thumb">
            <span class="badge">${p.category}</span>
            <img src="${p.image}" alt="${p.name}">
          </div>
          <div class="body">
            <div class="titleRow">
              <h3 class="title">${p.name}</h3>
            </div>
            <p class="meta"><strong>Cód:</strong> ${p.id}<br>${p.info}</p>

            <div class="actions">
              <button class="btn" data-action="minus">-</button>
              <button class="btn primary" data-action="add">
                ${qtyInCart > 0 ? `Adicionar (no carrinho: ${qtyInCart})` : "Adicionar ao carrinho"}
              </button>
              <button class="btn" data-action="plus">+</button>
            </div>
          </div>
        `;

        const [minusBtn, addBtn, plusBtn] = card.querySelectorAll("button");

        minusBtn.onclick = () => updateCart(p, -1);
        plusBtn.onclick = () => updateCart(p, +1);
        addBtn.onclick = () => updateCart(p, +1);

        grid.appendChild(card);
      });
    }

    // =========================
    // 6) CARRINHO
    // =========================
    function updateCart(product, delta){
      const current = state.cart[product.id]?.qty || 0;
      const next = current + delta;

      if(next <= 0){
        delete state.cart[product.id];
      }else{
        state.cart[product.id] = {
          id: product.id,
          name: product.name,
          qty: next,
          category: product.category
        };
      }

      setCartCount();
      renderGrid();
      renderCartModal();
    }

    function renderCartModal(){
      const body = el("cartBody");
      const items = Object.values(state.cart);

      body.innerHTML = "";
      if(items.length === 0){
        const div = document.createElement("div");
        div.className = "empty";
        div.textContent = "Seu carrinho está vazio. Adicione rótulos pelo catálogo.";
        body.appendChild(div);
        return;
      }

      items.forEach(item => {
        const row = document.createElement("div");
        row.className = "row";

        row.innerHTML = `
          <div>
            <strong>${item.name}</strong><br>
            <span style="color:#6b7280;font-size:12px">Cód: ${item.id} • ${item.category}</span>
          </div>

          <div class="qty">
            <button aria-label="Diminuir">-</button>
            <input value="${item.qty}" inputmode="numeric" />
            <button aria-label="Aumentar">+</button>
          </div>

          <div class="rowActions">
            <button class="danger">Remover</button>
          </div>
        `;

        const [minus, input, plus] = row.querySelectorAll(".qty button, .qty input");
        const removeBtn = row.querySelector(".danger");

        minus.onclick = () => updateCart({id:item.id, name:item.name, category:item.category}, -1);
        plus.onclick  = () => updateCart({id:item.id, name:item.name, category:item.category}, +1);
        removeBtn.onclick = () => { delete state.cart[item.id]; setCartCount(); renderGrid(); renderCartModal(); };

        input.onchange = () => {
          const v = parseInt(input.value, 10);
          if(isNaN(v) || v <= 0){
            delete state.cart[item.id];
          }else{
            state.cart[item.id].qty = v;
          }
          setCartCount();
          renderGrid();
          renderCartModal();
        };

        body.appendChild(row);
      });
    }

    function buildWhatsAppMessage(){
      const items = Object.values(state.cart);
      const name = el("clientName").value.trim();

      const lines = [];
      lines.push("Olá! Quero escolher estes rótulos do catálogo:");
      if(name) lines.push(`Nome: ${name}`);
      lines.push("");

      items.sort((a,b) => a.category.localeCompare(b.category) || a.id.localeCompare(b.id));
      items.forEach(i => {
        lines.push(`• ${i.qty}x | ${i.id} | ${i.name} (${i.category})`);
      });

      lines.push("");
      lines.push("Pode me passar valores e prazos?");

      return encodeURIComponent(lines.join("\n"));
    }

    function openWhatsApp(){
      const items = Object.values(state.cart);
      if(items.length === 0){
        alert("Seu carrinho está vazio. Adicione pelo menos 1 rótulo.");
        return;
      }
      const text = buildWhatsAppMessage();
      const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${text}`;
      window.open(url, "_blank");
    }

    // =========================
    // 7) MODAL OPEN/CLOSE
    // =========================
    function openModal(){
      el("backdrop").style.display = "flex";
      el("backdrop").setAttribute("aria-hidden", "false");
    }
    function closeModal(){
      el("backdrop").style.display = "none";
      el("backdrop").setAttribute("aria-hidden", "true");
    }

    // =========================
    // 8) INIT
    // =========================
    renderCategories();
    renderGrid();
    setCartCount();
    renderCartModal();

    el("search").addEventListener("input", (e) => {
      state.query = e.target.value;
      renderGrid();
    });

    el("cartBtn").onclick = () => { renderCartModal(); openModal(); };
    el("closeModal").onclick = closeModal;
    el("backdrop").addEventListener("click", (e) => {
      if(e.target === el("backdrop")) closeModal();
    });

    el("checkout").onclick = openWhatsApp;
  </script>
</body>
</html>